

#
# Account Settings List
#

account_arduino_enabled: true
account_bash_enabled: true
account_bumblebee_enabled: true
account_conky_enabled: true
account_docker_enabled: true
account_geeqie_enabled: true
account_golang_enabled: true
account_mysql_enabled: true
account_postgresql_enabled: true
account_server_enabled: true


#
# Account Specific Baidu Net Disk Settings
#

account_baidunetdisk_enabled: true
account_baidunetdisk_firejail_options:
  - name: "include networking options"
    rules:
      - "# include ${CFG}/isolate-networking-with-random-ip.inc"
      - "# include ${CFG}/allow-connection-to-internet.inc"
  - name: "enable fcitx input method"
    rules:
      - "include ${CFG}/allow-fcitx-input.inc"
  - name: "enable access to some parts of the download folders"
    rules:
      - "noblacklist ${DOWNLOADS}"
      - "noblacklist /mnt"
      - "noblacklist /mnt/download"
      - "noblacklist /mnt/ramdrive"
      - "whitelist /mnt/download/kmchan"
      - "whitelist /mnt/ramdrive/kmchan"
      - "blacklist /mnt/download/kmchan/alternative"
      - "blacklist /mnt/download/kmchan/private"
      - "blacklist /mnt/ramdrive/kmchan/alternative"
      - "blacklist /mnt/ramdrive/kmchan/private"


#
# Account Specific Firefox Settings
#

account_firefox_enabled: true
account_firefox_profiles:
  - { name: "default",     directory: "Default",     options: "",             default: true }
  - { name: "alternative", directory: "Alternative", options: "--marionette", default: false }
  - { name: "private",     directory: "Private",     options: "",             default: false }
  - { name: "work",        directory: "Work",        options: "",             default: false }
  - { name: "test",        directory: "Test",        options: "",             default: false }
account_firefox_firejail_options:
  - name: "enable fcitx input method"
    rules:
      - "include ${CFG}/allow-fcitx-input.inc"
  - name: "enable inhibition of screen saver"
    rules:
      - "include ${CFG}/allow-screensaver-inhibition.inc"
  - name: "enable access to some parts of the download folders"
    profiles: [ "default", "work", "test" ]
    rules:
      - "noblacklist /mnt"
      - "noblacklist /mnt/download"
      - "noblacklist /mnt/ramdrive"
      - "whitelist /mnt/download/kmchan"
      - "whitelist /mnt/ramdrive/kmchan"
      - "blacklist /mnt/download/kmchan/alternative"
      - "blacklist /mnt/download/kmchan/private"
      - "blacklist /mnt/ramdrive/kmchan/alternative"
      - "blacklist /mnt/ramdrive/kmchan/private"
  - name: "enable access to some parts of the download folders"
    profiles: [ "alternative" ]
    rules:
      - "noblacklist /mnt"
      - "noblacklist /mnt/download"
      - "noblacklist /mnt/ramdrive"
      - "whitelist /mnt/download/kmchan"
      - "whitelist /mnt/ramdrive/kmchan"
      - "blacklist /mnt/download/kmchan/private"
      - "blacklist /mnt/ramdrive/kmchan/private"
  - name: "enable access to some parts of the download folders"
    profiles: [ "private" ]
    rules:
      - "noblacklist /mnt"
      - "noblacklist /mnt/download"
      - "noblacklist /mnt/ramdrive"
      - "whitelist /mnt/download/kmchan"
      - "whitelist /mnt/ramdrive/kmchan"
      - "blacklist /mnt/download/kmchan/alternative"
      - "blacklist /mnt/ramdrive/kmchan/alternative"
  - name: "block firefox from using nvidia cards for 3d/video acceleration"
    rules:
      - "blacklist /dev/nvidia0"
      - "blacklist /dev/nvidiactl"
      - "blacklist /dev/nvidia-modeset"
      - "blacklist /dev/nvidia-uvm"
      - "blacklist /dev/nvidia-uvm-tools"


#
# Account Specific qBittorrent Settings
#

account_qbittorrent_enabled: true
account_qbittorrent_firejail_options:
  - name: "include networking options"
    rules:
      - "# include ${CFG}/isolate-networking-with-random-ip.inc"
      - "# include ${CFG}/allow-connection-to-internet.inc"
  - name: "enable fcitx input method"
    rules:
      - "include ${CFG}/allow-fcitx-input.inc"
  - name: "enable access to some parts of the download folders"
    rules:
      - "noblacklist ${DOWNLOADS}"
      - "noblacklist /mnt"
      - "noblacklist /mnt/download"
      - "noblacklist /mnt/ramdrive"
      - "whitelist /mnt/download/kmchan"
      - "whitelist /mnt/ramdrive/kmchan"
      - "blacklist /mnt/download/kmchan/private"
      - "blacklist /mnt/ramdrive/kmchan/private"


#
# Account Specific Skype Settings
#

account_skype_enabled: true
account_skype_firejail_options:
  - name: "include networking options"
    rules:
      - "# include ${CFG}/isolate-networking-with-random-ip.inc"
      - "# include ${CFG}/allow-connection-to-internet.inc"
  - name: "enable fcitx input method"
    rules:
      - "include ${CFG}/allow-fcitx.inc"
  - name: "enable access to some parts of the download folders"
    rules:
      - "noblacklist ${DOWNLOADS}"
      - "noblacklist /mnt"
      - "noblacklist /mnt/download"
      - "noblacklist /mnt/ramdrive"
      - "whitelist /mnt/download/kmchan"
      - "whitelist /mnt/ramdrive/kmchan"
      - "blacklist /mnt/download/kmchan/alternative"
      - "blacklist /mnt/download/kmchan/private"
      - "blacklist /mnt/ramdrive/kmchan/alternative"
      - "blacklist /mnt/ramdrive/kmchan/private"


#
# Account Specific Steam Settings
#

account_steam_enabled: true
account_steam_firejail_options:
  - name: "prefer local libraries in games"
    rules:
      - "env STEAM_RUNTIME_PREFER_HOST_LIBRARIES=1"
  - name: "enable fcitx input method"
    rules:
      - "include ${CFG}/allow-fcitx-input.inc"
  - name: "whitelist directories for Creeper World 3"
    rules:
      - "whitelist ${HOME}/.config/creeperworld3"
      - "mkdir ${HOME}/.config/creeperworld3"
  - name: "whitelist directories for 7 Days to Die"
    rules:
      - "whitelist ${HOME}/.local/share/7DaysToDie"
      - "mkdir ${HOME}/.local/share/7DaysToDie"
  - name: "enable access to some parts of the download folders"
    rules:
      - "noblacklist ${DOWNLOADS}"
      - "noblacklist /mnt"
      - "noblacklist /mnt/download"
      - "noblacklist /mnt/games"
      - "noblacklist /mnt/ramdrive"
      - "whitelist ${DOWNLOADS}"
      - "whitelist /mnt/download/kmchan"
      - "whitelist /mnt/games/kmchan"
      - "whitelist /mnt/ramdrive/kmchan"
      - "blacklist /mnt/download/kmchan/alternative"
      - "blacklist /mnt/download/kmchan/private"
      - "blacklist /mnt/ramdrive/kmchan/alternative"
      - "blacklist /mnt/ramdrive/kmchan/private"


#
# Account Specific Zoom Settings
#

account_zoom_enabled: true
account_zoom_firejail_options:
  - name: "include networking options"
    rules:
      - "# include ${CFG}/isolate-networking-with-random-ip.inc"
      - "# include ${CFG}/allow-connection-to-internet.inc"
  - name: "enable fcitx input method"
    rules:
      - "include ${CFG}/allow-fcitx-input.inc"
  - name: "enable access to some parts of the download folders"
    rules:
      - "noblacklist ${DOWNLOADS}"
      - "noblacklist /mnt"
      - "noblacklist /mnt/download"
      - "noblacklist /mnt/ramdrive"
      - "whitelist /mnt/download/kmchan"
      - "whitelist /mnt/ramdrive/kmchan"
      - "blacklist /mnt/download/kmchan/alternative"
      - "blacklist /mnt/download/kmchan/private"
      - "blacklist /mnt/ramdrive/kmchan/alternative"
      - "blacklist /mnt/ramdrive/kmchan/private"


#
# Software Lists
#

software_arduino_enabled: true
software_chrome_enabled: true
software_chromium_enabled: true
software_console_enabled: true
software_desktop_enabled: true
software_fcitx_enabled: true
software_firefox_enabled: true
software_golang_enabled: true
software_java_enabled: true
software_node_enabled: true
software_packaging_enabled: true
software_php_enabled: true
software_python_enabled: true
software_skype_enabled: true
software_steam_enabled: true
software_wine_enabled: true
software_zoom_enabled: true


#
# Service List
#

service_apache_enabled: true
service_bumblebee_enabled: true
service_certbot_enabled: true
service_ddclient_enabled: true
service_docker_enabled: true
service_mysql_enabled: true
service_php_fpm_enabled: true
service_postgresql_enabled: true


#
# Website List
#

website_demo_kmchan3_space_enabled: true
website_desktop_kmchan3_space_enabled: true
website_test_kmchan3_space_enabled: true


#
# Kernel-Based Virtual Machine Configuration
#

hardware_kvm_ignore_msrs: true
hardware_kvm_amd_avic: true
hardware_kvm_amd_npt: true


#
# PCI/PCIe Device Configuration
#

hardware_pci_devices:
  video:
    name: AMD Radeon Pro WX2100
    addresses:
      - { vendor: "1002", model: "6995", bus: "22", device: "00", function: "0" }
      - { vendor: "1002", model: "aae0", bus: "22", device: "00", function: "1" }
  shared-video:
    name: Nvidia GeForce GTX 1050 Ti
    addresses:
      - { vendor: "10de", model: "1c82", bus: "23", device: "00", function: "0" }
      - { vendor: "10de", model: "0fb9", bus: "23", device: "00", function: "1" }


#
# Sensor Configuration
#

hardware_sensor_modules:
  - "nct6775"


#
# USB Configuration
#

hardware_usb_autosuspend: -1


#
# Video Card Configuration
#

hardware_video_device: video
hardware_video_x11_autodetect: false
hardware_video_x11_driver: amdgpu


#
# Network Configuration
#

network_devices:
  wg0:
    - template: /etc/systemd/network/device.network
      owner: root
      group: systemd-network
      mode: "0644"
      options:
        method: static
        address: 192.168.254.2
        netmask: 255.255.255.0
    - template: /etc/systemd/network/device.netdev
      owner: root
      group: systemd-network
      mode: "0640"
      options:
        kind: wireguard
        private_key: "{{ network_devices_wireguard_keypairs.home.desktop.private_key }}"
        listen_port: 51820
        peers:
          - endpoint: "kmchan-server.local:51820"
            public_key: "{{ network_devices_wireguard_keypairs.home.server.public_key }}"
            allowed_ips: 192.168.254.0/24
    - template: /etc/NetworkManager/conf.d/device.conf
      options:
        unmanaged: true


#
# Network Mounts
#

network_mounts:
  - path: /mnt/server/kmchan01
    remote: "192.168.254.1:/mnt/data/kmchan01"
    options: "nfsvers=4.2,rsize=131072,wsize=131072,noatime,nodiratime"
    type: "nfs4"
    on_boot: false
    force_unmount: true
    mount_timeout: 30
    idle_timeout: 600
  - path: /mnt/server/kmchan02
    remote: "192.168.254.1:/mnt/data/kmchan02"
    options: "nfsvers=4.2,rsize=131072,wsize=131072,noatime,nodiratime"
    type: "nfs4"
    on_boot: false
    force_unmount: true
    mount_timeout: 30
    idle_timeout: 600
  - path: /mnt/server/kmchan03
    remote: "192.168.254.1:/mnt/data/kmchan03"
    options: "nfsvers=4.2,rsize=131072,wsize=131072,noatime,nodiratime"
    type: "nfs4"
    on_boot: false
    force_unmount: true
    mount_timeout: 30
    idle_timeout: 600
  - path: /mnt/server/kmchan05
    remote: "192.168.254.1:/mnt/data/kmchan05"
    options: "nfsvers=4.2,rsize=131072,wsize=131072,noatime,nodiratime"
    type: "nfs4"
    on_boot: false
    force_unmount: true
    mount_timeout: 30
    idle_timeout: 600


#
# Apache Service Settings
#

service_apache_http_port: 80
service_apache_https_port: 443
service_apache_http_proxy_port: 8080
service_apache_https_proxy_port: 8443
service_apache_default_virtual_host: "desktop.kmchan3.space"


#
# Bumblebee Service Settings
#

service_bumblebee_device: "shared-video"


#
# DDClient Service Settings
#

service_ddclient_hosts:
  - { provider: "namecheap", domain: "kmchan3.space", host: "demo" }
  - { provider: "namecheap", domain: "kmchan3.space", host: "desktop" }
  - { provider: "namecheap", domain: "kmchan3.space", host: "firefox" }
  - { provider: "namecheap", domain: "kmchan3.space", host: "test" }


#
# Guest Services Settings
#

service_guest_enabled: true

service_guest_disks:
  windows-root:
    type: "lvm"
    volume_group: "System"
    logical_volume: "Windows"
    account: "windows-disk"

service_guest_instances:
  windows:
    title: "Windows"
    account: "windows-machine"
    groups: [ "windows-disk" ]
    admins: [ "kmchan" ]
    processor_socket: 1
    processor_core: 6
    processor_thread: 1
    memory_size: 12
    memory_prealloc: true
    video_hardware: "passthrough"
    audio_hardware: "hda"
    disks: [ "windows-root" ]
    passthroughs: [ "shared-video" ]
    looking_glass_viewport: "1600x900"
    looking_glass_audio: "scream"
    scream_transport: "ivshmem"
    cpuset: "8-15"
    nice: "-5"
    inhibition_lock: "all"
    hpet: false

service_guest_keyboard: "/dev/input/by-id/usb-Logitech_USB_Receiver-if01-event-kbd"
service_guest_mouse: "/dev/input/by-id/usb-Logitech_USB_Receiver-if01-event-mouse"

service_guest_network: "192.168.192.0"
service_guest_netmask: "255.255.255.0"
service_guest_gateway: "192.168.192.1"
service_guest_dhcp_lower: "192.168.192.100"
service_guest_dhcp_upper: "192.168.192.199"



#
# System Settings
#

system_firejail_enabled: true
system_network_manager_enabled: true


#
# Network Manager Settings
#

system_network_manager_options:
  connection-ethernet:
    match-device: type:ethernet
    ipv4.route-metric: 100
    ipv6.route-metric: 100
  connection-wifi:
    match-device: type:wifi
    ipv4.route-metric: 90
    ipv6.route-metric: 90

#
# Ramdrive Settings
#

system_ramdrive_size: 24


